<!-- index.html (Tailwind CDN version) -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Allegations of Bribery | Forums</title>

  <!-- Favicon -->
  <link rel="icon" href="./favicon.ico" />

  <!-- Tailwind CDN (fastest path for GitHub Pages) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="./css/styles.css" />

  <!-- Optional: set a consistent dark palette via Tailwind config -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            panel: "#111827",     // slate-900-ish
            panel2: "#0b0e13",    // deeper panel
            stroke: "#1f2933",    // subtle border
            page: "#0f1216"       // page background
          }
        }
      }
    }
  </script>
</head>

<script src="js/ucGate.js"></script>

<body class="bg-page text-slate-200 antialiased">

  <div id="ucGate" class="uc-gate" role="dialog" aria-modal="true" aria-labelledby="ucTitle">
    <div class="uc-gate-card">
      <h1 id="ucTitle">Under Construction</h1>
      <p class="uc-gate-sub">
        This site is live in preview mode. Content is being verified and expanded.
      </p>
      <p class="uc-gate-cta">
        Click the button below to continue to the site.
      </p>

      <button id="ucContinueBtn" class="uc-gate-btn" type="button">
        Click to Continue
      </button>

      <p class="uc-gate-note">
        By continuing, you acknowledge that information may change as sources are verified.
      </p>
    </div>
  </div>

  <div id="siteHeader"></div>

  <!-- Main Layout -->
  <main class="mx-auto grid max-w-6xl grid-cols-1 gap-6 px-4 py-6 lg:grid-cols-[240px,1fr,200px]">
    <!-- Left Sidebar -->
    <aside class="space-y-3">
      <div class="rounded-lg border border-stroke bg-panel p-4">
        <div class="flex items-center justify-between">
          <h2 class="text-xs font-semibold uppercase tracking-wider text-slate-400">Topics</h2>
          <button class="text-xs text-slate-400 hover:text-slate-200 lg:hidden" type="button">
            Collapse
          </button>
        </div>

        <ul class="mt-3 space-y-1 text-sm">
          <li>
            <a class="flex items-center gap-2 rounded-md px-2 py-2 hover:bg-slate-800" href="forum.html?forum=bribery-allegations">
              <span class="h-2 w-2 rounded-full bg-sky-400"></span>
              Bribery Allegations
            </a>
          </li>
          <li>
            <a class="flex items-center gap-2 rounded-md px-2 py-2 hover:bg-slate-800" href="forum.html?forum=judicial-misconduct">
              <span class="h-2 w-2 rounded-full bg-rose-400"></span>
              Judicial Misconduct
            </a>
          </li>
          <li>
            <a class="flex items-center gap-2 rounded-md px-2 py-2 hover:bg-slate-800" href="forum.html?forum=political-corruption">
              <span class="h-2 w-2 rounded-full bg-amber-400"></span>
              Political Corruption
            </a>
          </li>
          <li>
            <a class="flex items-center gap-2 rounded-md px-2 py-2 hover:bg-slate-800" href="forum.html?forum=union-matters">
              <span class="h-2 w-2 rounded-full bg-lime-400"></span>
              Union Matters
            </a>
          </li>
          <li>
            <a class="flex items-center gap-2 rounded-md px-2 py-2 hover:bg-slate-800" href="#">
              <span class="h-2 w-2 rounded-full bg-violet-400"></span>
              Public Records
            </a>
          </li>
        </ul>
      </div>

      <div class="rounded-lg border border-stroke bg-panel p-4">
        <h3 class="text-xs font-semibold uppercase tracking-wider text-slate-400">Quick Links</h3>
        <div class="mt-3 space-y-2 text-sm">
          <a class="block rounded-md px-2 py-2 text-slate-300 hover:bg-slate-800 hover:text-white" href="new-posts.html">New posts</a>
          <a class="block rounded-md px-2 py-2 text-slate-300 hover:bg-slate-800 hover:text-white" href="./unanswered.html">Unanswered</a>
          <a class="block rounded-md px-2 py-2 text-slate-300 hover:bg-slate-800 hover:text-white" href="your-threads.html">Your threads</a>
        </div>
      </div>
    </aside>

    <!-- Center Content -->
    <section class="space-y-5">
      <!-- Page Header -->
      <div class="rounded-lg border border-stroke bg-panel p-5">
        <div class="flex items-center justify-between">
          <div>
            <h1 class="text-xl font-semibold">Forums</h1>
            <p class="mt-1 text-sm text-slate-400">
              Read public content. Posting is limited to approved authors.
            </p>
          </div>
          <a class="text-sm text-sky-300 hover:text-sky-200" href="new-posts.html">New posts</a>
          <a id="yourThreadsHeaderLink" class="ml-4 text-sm text-slate-400 hover:text-slate-200" href="your-threads.html" style="display:none;">Your threads</a>
        </div>
      </div>

      <!-- Section: Most Activity Area -->
      <div class="rounded-lg border border-stroke bg-panel2 p-5">
        <div class="flex items-center justify-between">
          <h2 id="mostActivityHeading" class="text-sm font-semibold text-slate-200">Most Activity Area</h2>
          <a class="text-sm text-slate-400 hover:text-slate-200" href="#">View all</a>
        </div>

        <div class="mt-4">
          <div id="postsControls" class="flex items-center justify-between gap-3">
            <div class="text-xs text-slate-400">Showing threads sorted by recent activity</div>
            <div>
              <input id="searchInput" class="input" placeholder="Search titles" style="width:220px" />
              <button id="refreshBtn" class="btn btn-sm" style="margin-left:8px">Refresh</button>
            </div>
          </div>

          <div id="emptyState" class="mt-4 muted">No threads found.</div>
          <div id="postsList" class="mt-4"></div>
        </div>
      </div>

      <!-- Section: Investigations -->
      <div class="rounded-lg border border-stroke bg-panel2 p-5">
        <div class="flex items-center justify-between">
          <h2 class="text-sm font-semibold text-slate-200">Investigations</h2>
          <a class="text-sm text-slate-400 hover:text-slate-200" href="#">View all</a>
        </div>

        <div class="mt-4 grid grid-cols-1 gap-4 md:grid-cols-2">
          <a href="forum.html?forum=judicial-misconduct" class="group rounded-lg border border-stroke bg-panel p-4 transition hover:bg-slate-800">
            <div class="flex items-start gap-3">
              <div class="mt-1 flex h-9 w-9 items-center justify-center rounded-md bg-slate-700 text-slate-200">
                <span class="text-xs font-bold">JM</span>
              </div>
              <div class="min-w-0">
                <div class="flex items-center justify-between gap-3">
                  <h3 class="truncate text-sm font-semibold group-hover:text-white">Judicial Misconduct</h3>
                  <span class="shrink-0 text-xs text-slate-500">View</span>
                </div>
                <p class="mt-1 line-clamp-2 text-xs text-slate-400">
                  Case tracking, timelines, and sourced documentation for court conduct.
                </p>
                <div class="mt-3 flex items-center gap-4 text-xs text-slate-500">
                  <span>Threads: 0</span><span>Comments: 0</span>
                </div>
              </div>
            </div>
          </a>

          <a href="forum.html?forum=public-records" class="group rounded-lg border border-stroke bg-panel p-4 transition hover:bg-slate-800">
            <div class="flex items-start gap-3">
              <div class="mt-1 flex h-9 w-9 items-center justify-center rounded-md bg-slate-700 text-slate-200">
                <span class="text-xs font-bold">PR</span>
              </div>
              <div class="min-w-0">
                <div class="flex items-center justify-between gap-3">
                  <h3 class="truncate text-sm font-semibold group-hover:text-white">Public Records</h3>
                  <span class="shrink-0 text-xs text-slate-500">View</span>
                </div>
                <p class="mt-1 line-clamp-2 text-xs text-slate-400">
                  Requests, responses, and document dumps organized by agency and date.
                </p>
                <div class="mt-3 flex items-center gap-4 text-xs text-slate-500">
                  <span>Threads: 0</span><span>Comments: 0</span>
                </div>
              </div>
            </div>
          </a>
        </div>
      </div>

      <div id="siteFooter"></div>
    </section>

    <!-- Right Column (optional ad / widgets like XDA) -->
    <aside class="hidden lg:block">
      <div class="sticky top-20 space-y-4">
        <div class="rounded-lg border border-stroke bg-panel p-4">
          <div class="text-xs font-semibold uppercase tracking-wider text-slate-400">Sidebar</div>
          <div class="mt-2 text-sm text-slate-300">
            Reserved for notices, highlights, or sponsorship blocks.
          </div>
        </div>

        <div class="flex h-40 items-center justify-center rounded-md border border-dashed border-slate-700">
          <img
            src="./assets/ladyjusticebribed.png"
            alt="Allegations of Bribery"
            class="h-40 w-full object-contain"
          />
        </div>

        <!-- Sidebar ad placeholder -->
        <div id="sidebarAd" class="rounded-lg border border-stroke bg-panel p-4">
          <div class="text-xs font-semibold uppercase tracking-wider text-slate-400">Sponsored</div>
          <div id="ad-slot-sidebar" class="mt-2 ad-slot ad-stub">Sidebar ad placeholder</div>
        </div>

        <!-- Sponsor contact box -->
        <div class="rounded-lg border border-stroke bg-panel p-4">
          <div class="text-xs font-semibold uppercase tracking-wider text-slate-400">Sponsor</div>
          <div class="mt-2 text-sm text-slate-300">Interested in sponsoring? <a class="text-sky-300" href="./sponsor.html">Contact us</a>.</div>
        </div>
      </div>
    </aside>
  </main>

  <script>
    const __y = document.getElementById("y");
    if (__y) __y.textContent = new Date().getFullYear();
  </script>
  <script type="module">
    import initShell from "./js/shell.js";
    import { populateForumCounts } from "./js/forumCounts.js";

    await initShell();

    // Populate forum post/thread counts on the landing page
    try {
      await populateForumCounts();
    } catch (e) {
      // silently ignore forum counts errors in production
    }
    // Load page-specific module to render the Most Activity Area
    try {
      await import('./js/index.js');
    } catch (e) {
      console.error('Failed to load page module ./js/index.js:', e);
    }
  </script>

  <!-- ONLY NECESSARY CHANGE: show Write link when logged in -->
  <!-- Write link removed; Home link is now in header -->

</body>
</html>